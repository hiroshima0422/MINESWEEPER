<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">

    </head>
    <body>
        <h1>aaaa</h1>    
        <div id="app">bbb</div>
        <button id = "button">ボタンです</button>
        <div class="cssSprite">
            <a href="#">ロゴ</a>
            </div>
        <style>

        </style>
        <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
        <script>

  console.log(localStorage.user); // 名前
        if(localStorage.user){
            
                
            
        }else{
            let result = prompt('名前を入力してください', '名前');

            if(result){
                localStorage.setItem('user', result);
                
            //入力した場合
            } else {
            //キャンセルを押した場合
            let result = prompt('名前を入力してください。<br>ゲームが始められません。', '名前');

                if(result){
                    localStorage.setItem('user', result);               
                } else {
                    //キャンセルを押した場合
                    alert('また、お願いします。');
                }
            }
        }
        /****************************
        課題8　ポーリングでサーバーに問い合わせながらフロント開発
        ****************************/
        //jsonファイルを読み込むだけの場合は、urlとcallbackだけ指定することが多いです。
        //getJSON( url [, data] [, callback] )
        const render = (ary_f) => {  //(引数,...)=>{...関数の本体...}
            // DOMを破棄
            console.log(ary_f);
            $("#app").empty();
            // 再構築
            for (  let i = 0;  i < 10;  i++) {
                $("#app").append('<div class="block">');
            }
            
        };

        //setInterval(() => {
            // 0.5秒ごとにサーバーにポーリング
            $.getJSON('/board', render);
        //}, 500);

        $('.block').click(function() {
        // xとyを算出する
        $.getJSON('/board', {
            x: x,
            y: y,
            user: user,
        }, render);
        });

        
        </script>
    </body>
</html>

